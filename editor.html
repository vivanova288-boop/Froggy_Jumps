<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Froggy Constructor v2.0</title>
    <style>
        :root { --primary: #6ab04c; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .editor-card { max-width: 800px; margin: 0 auto; background: white; border-radius: 12px; shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; }
        .tabs { display: flex; background: #eee; }
        .tab-btn { flex: 1; padding: 15px; border: none; cursor: pointer; font-weight: bold; background: #eee; transition: 0.3s; }
        .tab-btn.active { background: white; color: var(--primary); border-bottom: 3px solid var(--primary); }
        .tab-content { padding: 20px; display: none; }
        .tab-content.active { display: block; }
        .field { margin-bottom: 15px; }
        label { display: block; font-size: 13px; font-weight: bold; margin-bottom: 5px; color: #333; }
        input, textarea, select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .btn-generate { background: #ff4757; color: white; border: none; padding: 20px; width: 100%; font-size: 16px; font-weight: bold; cursor: pointer; }
        #output { width: 100%; height: 100px; margin-top: 15px; background: #2d3436; color: #00d8d6; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>

<div class="editor-card">
    <div style="background: var(--primary); color: white; padding: 15px; text-align: center; font-weight: bold;">üê∏ FROGGY CONSTRUCTOR v2.0</div>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="openTab(event, 'tab-content')">–ö–æ–Ω—Ç–µ–Ω—Ç</button>
        <button class="tab-btn" onclick="openTab(event, 'tab-mech')">–ú–µ—Ö–∞–Ω–∏–∫–∞</button>
        <button class="tab-btn" onclick="openTab(event, 'tab-visual')">–í–∏–∑—É–∞–ª</button>
        <button class="tab-btn" onclick="openTab(event, 'tab-audio')">–ê—É–¥–∏–æ</button>
    </div>

    <div id="tab-content" class="tab-content active">
        <div class="field"><label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–≥—Ä—ã</label><input type="text" id="title" value="PAST SIMPLE CHALLENGE"></div>
        <div class="field">
            <label>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π (–í–æ–ø—Ä–æ—Å | –û—Ç–≤–µ—Ç1 | –û—Ç–≤–µ—Ç2 | –û—Ç–≤–µ—Ç3). –ü–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç - –≤—Å–µ–≥–¥–∞ –≤–µ—Ä–Ω—ã–π!</label>
            <textarea id="questions" style="height: 150px;">Yesterday I ___ my room. | cleaned | clean | cleans
They ___ at the cinema. | were | was | are
It ___ a sunny day. | was | were | did</textarea>
        </div>
    </div>

    <div id="tab-mech" class="tab-content">
        <div class="grid">
            <div class="field"><label>–£—Ä–æ–≤–Ω–µ–π</label><input type="number" id="lvls" value="3"></div>
            <div class="field"><label>–í–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å</label><input type="number" id="qpl" value="5"></div>
            <div class="field"><label>–ñ–∏–∑–Ω–µ–π</label><input type="number" id="lives" value="5"></div>
            <div class="field"><label>–¢–∞–π–º–µ—Ä (—Å–µ–∫, 0 - –≤—ã–∫–ª)</label><input type="number" id="timer" value="15"></div>
        </div>
        <div class="field"><input type="checkbox" id="shuffle" checked> –ü–µ—Ä–µ–º–µ—à–∏–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã</div>
    </div>

    <div id="tab-visual" class="tab-content">
        <div class="field"><label>URL –õ—è–≥—É—à–∫–∏ (PNG)</label><input type="text" id="img_frog" value="2.png"></div>
        <div class="field"><label>URL –õ–∏—Å—Ç–∞ (PNG)</label><input type="text" id="img_leaf" value="1.png"></div>
        <div class="field"><label>URL –ò–∫–æ–Ω–∫–∏ –∂–∏–∑–Ω–∏ (PNG)</label><input type="text" id="img_life" value="3.png"></div>
        <div class="field"><label>–¶–≤–µ—Ç —à–∞–ø–∫–∏ (HEX)</label><input type="color" id="col_ui" value="#6ab04c"></div>
    </div>

    <div id="tab-audio" class="tab-content">
        <div class="field"><label>–û–±—â–∞—è –≥—Ä–æ–º–∫–æ—Å—Ç—å (0.0 - 1.0)</label><input type="number" id="vol" step="0.1" value="0.5"></div>
        <div class="field"><label>–§–æ–Ω–æ–≤—ã–π –∑–≤—É–∫ (URL)</label><input type="text" id="snd_bg" value="7.mp3"></div>
    </div>

    <button class="btn-generate" onclick="generateCode()">‚ú® –°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –ö–û–î –î–õ–Ø GENIALLY</button>
    <textarea id="output" readonly placeholder="–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –∫–æ–¥..."></textarea>
</div>

<script>
    function openTab(evt, tabName) {
        let contents = document.getElementsByClassName("tab-content");
        for (let i = 0; i < contents.length; i++) contents[i].style.display = "none";
        let buttons = document.getElementsByClassName("tab-btn");
        for (let i = 0; i < buttons.length; i++) buttons[i].className = buttons[i].className.replace(" active", "");
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    function generateCode() {
        const qLines = document.getElementById('questions').value.split('\n').filter(l => l.includes('|'));
        const qs = qLines.map(line => {
            const p = line.split('|').map(x => x.trim());
            return { q: p[0], options: [p[1], p[2], p[3]], correct: 0 };
        });

        const config = {
            t: document.getElementById('title').value,
            qs: qs,
            lv: document.getElementById('lvls').value,
            qp: document.getElementById('qpl').value,
            li: document.getElementById('lives').value,
            tm: document.getElementById('timer').value,
            sh: document.getElementById('shuffle').checked,
            v: {
                f: document.getElementById('img_frog').value,
                l: document.getElementById('img_leaf').value,
                i: document.getElementById('img_life').value,
                c: document.getElementById('col_ui').value
            },
            s: {
                vol: document.getElementById('vol').value,
                bg: document.getElementById('snd_bg').value
            }
        };

        const gameUrl = window.location.href.replace('editor.html', 'index.html');
        const finalCode = `<iframe id="frog_game" src="${gameUrl}" style="width:100%;height:600px;border:none;" allow="autoplay"></iframe>
<script>
window.addEventListener('message', function(e) {
    if(e.data === 'frog_ready') {
        document.getElementById('frog_game').contentWindow.postMessage(${JSON.stringify(config)}, '*');
    }
});
<\/script>`;
        document.getElementById('output').value = finalCode;
    }
</script>
</body>
</html>
