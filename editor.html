<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f6; margin: 0; padding: 10px; font-size: 13px; }
        .tabs { display: flex; background: #fff; border-bottom: 2px solid #6ab04c; sticky: top; z-index: 10; gap: 2px; }
        .tab-btn { padding: 8px 10px; border: none; background: #eee; cursor: pointer; font-size: 11px; font-weight: bold; border-radius: 5px 5px 0 0; flex-grow: 1; }
        .tab-btn.active { background: #6ab04c; color: white; }
        .scroll-container { height: 320px; overflow-y: auto; background: white; padding: 15px; border-radius: 0 0 10px 10px; box-shadow: inset 0 0 5px rgba(0,0,0,0.05); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        label { display: block; margin: 10px 0 4px; font-weight: bold; color: #444; }
        input, textarea, select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        textarea { height: 70px; font-family: monospace; font-size: 11px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .save-btn { width: 100%; padding: 12px; background: #2f3542; color: white; border: none; border-radius: 8px; margin-top: 10px; font-weight: bold; cursor: pointer; position: sticky; bottom: 0; }
        .save-btn:hover { background: #6ab04c; }
        .row { display: flex; align-items: center; gap: 8px; margin-top: 5px; }
        input[type="checkbox"] { width: auto; }
    </style>
</head>
<body>

<div class="tabs">
    <button class="tab-btn active" onclick="openTab(event, 'tab1')">–ö–æ–Ω—Ç–µ–Ω—Ç</button>
    <button class="tab-btn" onclick="openTab(event, 'tab2')">–ú–µ—Ö–∞–Ω–∏–∫–∞</button>
    <button class="tab-btn" onclick="openTab(event, 'tab3')">–í–∏–∑—É–∞–ª</button>
    <button class="tab-btn" onclick="openTab(event, 'tab4')">–ê—É–¥–∏–æ</button>
    <button class="tab-btn" onclick="openTab(event, 'tab5')">–§–∏–Ω–∞–ª/RU</button>
</div>

<div class="scroll-container">
    <div id="tab1" class="tab-content active">
        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–≥—Ä—ã</label>
        <input type="text" id="title" value="PAST SIMPLE CHALLENGE">
        <label>–í–æ–ø—Ä–æ—Å—ã (JSON)</label>
        <textarea id="questions">[{"q": "I ___ to the park.", "a": ["went", "go", "gone"], "correct": 0}]</textarea>
        <div class="grid">
            <div><label>–£—Ä–æ–≤–Ω–µ–π</label><input type="number" id="levels" value="1"></div>
            <div><label>–í–æ–ø—Ä–æ—Å–æ–≤ –≤ —É—Ä–æ–≤–Ω–µ</label><input type="number" id="qLevel" value="5"></div>
        </div>
        <label class="row"><input type="checkbox" id="shuffle" checked> –ü–µ—Ä–µ–º–µ—à–∏–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã</label>
    </div>

    <div id="tab2" class="tab-content">
        <div class="grid">
            <div><label>–ñ–∏–∑–Ω–µ–π</label><input type="number" id="lives" value="5"></div>
            <div><label>–¢–∞–π–º–µ—Ä (—Å–µ–∫)</label><input type="number" id="timer" value="15"></div>
        </div>
        <label>–°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏</label>
        <select id="speed"><option value="normal">–û–±—ã—á–Ω–∞—è</option><option value="fast">–ë—ã—Å—Ç—Ä–∞—è</option></select>
        <label class="row"><input type="checkbox" id="timerOn" checked> –¢–∞–π–º–µ—Ä –≤–∫–ª/–≤—ã–∫–ª</label>
    </div>

    <div id="tab3" class="tab-content">
        <label>–§–æ–Ω (URL)</label><input type="text" id="imgBg" value="bg.png">
        <label>–õ—è–≥—É—à–∫–∞ (URL)</label><input type="text" id="imgFrog" value="1.png">
        <label>–õ–∏—Å—Ç—å—è (URL)</label><input type="text" id="imgLeaf" value="2.png">
        <label>–ò–∫–æ–Ω–∫–∞ –∂–∏–∑–Ω–∏ (URL)</label><input type="text" id="imgHeart" value="3.png">
        <div class="grid">
            <div><label>–¶–≤–µ—Ç —à–∞–ø–∫–∏</label><input type="color" id="cHead" value="#6ab04c"></div>
            <div><label>–®—Ä–∏—Ñ—Ç (px)</label><input type="number" id="fSize" value="22"></div>
        </div>
    </div>

    <div id="tab4" class="tab-content">
        <label>–ì—Ä–æ–º–∫–æ—Å—Ç—å: <span id="volVal">0.5</span></label>
        <input type="range" id="vol" min="0" max="1" step="0.1" value="0.5" oninput="volVal.innerText=this.value">
        <label>–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ (URL)</label><input type="text" id="sndAmb" value="7.mp3">
        <label class="row"><input type="checkbox" id="sndOn" checked> –ó–≤—É–∫–∏ –≤–∫–ª/–≤—ã–∫–ª</label>
        <p style="font-size:10px; color:#888;">–ó–≤—É–∫–∏ (—Å—Ç–∞—Ä—Ç, –æ—Ç–≤–µ—Ç, –æ—à–∏–±–∫–∞) –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–æ–≤ 1.mp3 - 6.mp3</p>
    </div>

    <div id="tab5" class="tab-content">
        <label>–¢–µ–∫—Å—Ç –ø–æ–±–µ–¥—ã</label><input type="text" id="tWin" value="–í–´ –ü–û–ë–ï–î–ò–õ–ò!">
        <label>–¢–µ–∫—Å—Ç –ø—Ä–æ–∏–≥—Ä—ã—à–∞</label><input type="text" id="tLose" value="–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê">
        <label>–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
        <select id="lang"><option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="en">English</option></select>
        <label class="row"><input type="checkbox" id="btnRetry" checked> –ö–Ω–æ–ø–∫–∞ ¬´–°–Ω–æ–≤–∞¬ª</label>
    </div>
</div>

<button class="save-btn" onclick="send()">üöÄ –û–ë–ù–û–í–ò–¢–¨ –ò–ì–†–£</button>

<script>
function openTab(e, name) {
    let c = document.getElementsByClassName("tab-content");
    for (let i=0; i<c.length; i++) c[i].classList.remove("active");
    let b = document.getElementsByClassName("tab-btn");
    for (let i=0; i<b.length; i++) b[i].classList.remove("active");
    document.getElementById(name).classList.add("active");
    e.currentTarget.classList.add("active");
}

function send() {
    try {
        const s = {
            title: document.getElementById('title').value,
            questions: JSON.parse(document.getElementById('questions').value),
            levels: document.getElementById('levels').value,
            qPerLevel: document.getElementById('qLevel').value,
            shuffle: document.getElementById('shuffle').checked,
            lives: document.getElementById('lives').value,
            timer: document.getElementById('timer').value,
            timerOn: document.getElementById('timerOn').checked,
            animSpeed: document.getElementById('speed').value,
            images: { bg: document.getElementById('imgBg').value, frog: document.getElementById('imgFrog').value, leaf: document.getElementById('imgLeaf').value, heart: document.getElementById('imgHeart').value },
            colors: { header: document.getElementById('cHead').value },
            fontSize: document.getElementById('fSize').value,
            audio: { on: document.getElementById('sndOn').checked, vol: document.getElementById('vol').value, ambience: document.getElementById('sndAmb').value },
            final: { win: document.getElementById('tWin').value, lose: document.getElementById('tLose').value, retry: document.getElementById('btnRetry').checked },
            lang: document.getElementById('lang').value
        };
        window.parent.postMessage({ type: 'config', settings: s }, '*');
    } catch(e) { alert("–û—à–∏–±–∫–∞ –≤ JSON –≤–æ–ø—Ä–æ—Å–æ–≤!"); }
}
</script>
</body>
</html>
