<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Froggy Quest Editor</title>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; padding: 20px; display: flex; gap: 20px; }
        #setup-area { flex: 1; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        #output-area { width: 400px; background: #2d3436; color: #fab1a0; padding: 20px; border-radius: 12px; position: sticky; top: 20px; height: fit-content; }
        
        .level-block { border: 2px solid #6ab04c; padding: 15px; margin-bottom: 20px; border-radius: 8px; position: relative; }
        .level-title { font-weight: bold; color: #6ab04c; font-size: 1.2em; margin-bottom: 10px; }
        
        .question-item { background: #f9f9f9; padding: 10px; margin: 10px 0; border-left: 4px solid #2bbcd6; }
        .opt-row { display: flex; align-items: center; gap: 10px; margin: 5px 0; }
        
        input[type="text"] { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .opt-input { width: 70% !important; }
        
        button { cursor: pointer; padding: 8px 15px; border-radius: 5px; border: none; transition: 0.2s; }
        .btn-add { background: #6ab04c; color: white; }
        .btn-del { background: #eb4d4b; color: white; padding: 4px 8px; font-size: 12px; }
        .btn-export { background: #0984e3; color: white; width: 100%; margin-top: 10px; font-size: 1.1em; }
        
        pre { white-space: pre-wrap; word-wrap: break-word; font-size: 12px; color: #00cec9; }
    </style>
</head>
<body>

<div id="setup-area">
    <h1>üê∏ –†–µ–¥–∞–∫—Ç–æ—Ä –ö–≤–µ—Å—Ç–æ–≤ –õ—è–≥—É—à–∫–∏</h1>
    <div id="levels-container"></div>
    <button class="btn-add" onclick="addLevel()">+ –î–æ–±–∞–≤–∏—Ç—å –£—Ä–æ–≤–µ–Ω—å</button>
</div>

<div id="output-area">
    <h3>–î–∞–Ω–Ω—ã–µ –¥–ª—è –∏–≥—Ä—ã:</h3>
    <p style="font-size: 12px; color: #bdc3c7;">–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç –∫–æ–¥ –∏ –∑–∞–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é levelsBank –≤ –∏–≥—Ä–µ.</p>
    <pre id="json-output">{}</pre>
    <button class="btn-export" onclick="copyCode()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
</div>

<script>
    let questData = { 1: [] };

    function addLevel() {
        const lvls = Object.keys(questData).length;
        questData[lvls + 1] = [];
        render();
    }

    function addQuestion(lvl) {
        questData[lvl].push({ q: "–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å...", options: ["–í–∞—Ä–∏–∞–Ω—Ç 1", "–í–∞—Ä–∏–∞–Ω—Ç 2", "–í–∞—Ä–∏–∞–Ω—Ç 3"], correct: 0 });
        render();
    }

    function removeQuestion(lvl, idx) {
        questData[lvl].splice(idx, 1);
        render();
    }

    function updateVal(lvl, idx, field, val) {
        if (field === 'q') questData[lvl][idx].q = val;
        if (field === 'correct') questData[lvl][idx].correct = parseInt(val);
        updateJSON();
    }

    function updateOpt(lvl, idx, optIdx, val) {
        questData[lvl][idx].options[optIdx] = val;
        updateJSON();
    }

    function updateJSON() {
        document.getElementById('json-output').textContent = "const levelsBank = " + JSON.stringify(questData, null, 4) + ";";
    }

    function render() {
        const container = document.getElementById('levels-container');
        container.innerHTML = '';

        for (let lvl in questData) {
            let lvlDiv = document.createElement('div');
            lvlDiv.className = 'level-block';
            lvlDiv.innerHTML = `<div class="level-title">–£—Ä–æ–≤–µ–Ω—å ${lvl}</div>`;

            questData[lvl].forEach((q, idx) => {
                let qDiv = document.createElement('div');
                qDiv.className = 'question-item';
                qDiv.innerHTML = `
                    <div style="display:flex; gap:10px; align-items:center; margin-bottom:10px;">
                        <strong>Q${idx+1}:</strong> 
                        <input type="text" value="${q.q}" oninput="updateVal(${lvl}, ${idx}, 'q', this.value)">
                        <button class="btn-del" onclick="removeQuestion(${lvl}, ${idx})">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                    ${q.options.map((opt, oIdx) => `
                        <div class="opt-row">
                            <input type="radio" name="correct_${lvl}_${idx}" ${q.correct === oIdx ? 'checked' : ''} 
                                   onchange="updateVal(${lvl}, ${idx}, 'correct', ${oIdx})">
                            <input type="text" class="opt-input" value="${opt}" 
                                   oninput="updateOpt(${lvl}, ${idx}, ${oIdx}, this.value)">
                        </div>
                    `).join('')}
                `;
                lvlDiv.appendChild(qDiv);
            });

            let addQBtn = document.createElement('button');
            addQBtn.className = 'btn-add';
            addQBtn.style.background = '#2bbcd6';
            addQBtn.innerText = "+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å";
            addQBtn.onclick = () => addQuestion(lvl);
            lvlDiv.appendChild(addQBtn);

            container.appendChild(lvlDiv);
        }
        updateJSON();
    }

    function copyCode() {
        const text = document.getElementById('json-output').textContent;
        navigator.clipboard.writeText(text);
        alert("–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –¢–µ–ø–µ—Ä—å –≤—Å—Ç–∞–≤—å –µ–≥–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∏–≥—Ä—ã –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ levelsBank.");
    }

    render();
</script>

</body>
</html>
