<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Froggy Builder PRO</title>
    <style>
        :root { --accent: #2ecc71; --dark: #1e1e26; }
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; background: #0f0f12; color: #fff; overflow: hidden; }
        #app { display: flex; height: 100vh; }
        
        /* –°—Ç–∏–ª–∏ –†–µ–¥–∞–∫—Ç–æ—Ä–∞ (–°–ª–µ–≤–∞) */
        #controls { width: 400px; background: #252529; border-right: 2px solid #000; padding: 20px; box-sizing: border-box; overflow-y: auto; display: flex; flex-direction: column; }
        .group { margin-bottom: 15px; }
        label { display: block; font-size: 11px; color: #888; text-transform: uppercase; margin-bottom: 5px; }
        input, textarea { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 10px; border-radius: 6px; box-sizing: border-box; }
        .btn-gen { background: #e74c3c; color: white; border: none; padding: 18px; font-weight: bold; cursor: pointer; border-radius: 8px; margin-top: 20px; font-size: 16px; }

        /* –°—Ç–∏–ª–∏ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (–°–ø—Ä–∞–≤–∞) */
        #preview { flex-grow: 1; background: #111; display: flex; align-items: center; justify-content: center; }
        #mockup { 
            width: 800px; height: 500px; position: relative; border-radius: 15px; 
            overflow: hidden; box-shadow: 0 0 50px rgba(0,0,0,0.8); background-size: cover; background-position: center;
        }
        #m-header { position: absolute; top: 0; width: 100%; height: 50px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        #m-q { position: absolute; top: 70px; left: 50%; transform: translateX(-50%); width: 75%; background: #fff; color: #000; padding: 15px; border-radius: 12px; text-align: center; font-weight: bold; }
        #m-frog { position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); width: 70px; height: 70px; background-size: contain; background-repeat: no-repeat; z-index: 5; }
        .m-leaf { position: absolute; bottom: 30px; width: 110px; height: 85px; background-size: contain; background-repeat: no-repeat; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px; }
    </style>
</head>
<body>

<div id="app">
    <div id="controls">
        <h2 style="color: var(--accent); margin: 0 0 20px 0;">üê∏ –ú–ê–°–¢–ï–†–°–ö–ê–Ø</h2>
        
        <div class="group"><label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–≤–µ—Å—Ç–∞</label>
        <input type="text" id="v-title" value="PAST SIMPLE CHALLENGE" oninput="upd()"></div>

        <div class="group"><label>–¶–≤–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞</label>
        <input type="color" id="v-color" value="#27ae60" oninput="upd()"></div>

        <div class="group"><label>–í–æ–ø—Ä–æ—Å—ã (–í–æ–ø—Ä–æ—Å|–í–µ—Ä–Ω–æ|–ù–µ—Ç|–ù–µ—Ç)</label>
        <textarea id="v-qs" rows="5" oninput="upd()">I ___ a movie.|watched|watch|watches</textarea></div>

        <div class="group"><label>–§–æ–Ω</label><input type="file" onchange="read(this, 'bg')"></div>
        <div class="group"><label>–õ—è–≥—É—à–∫–∞</label><input type="file" onchange="read(this, 'frog')"></div>
        <div class="group"><label>–õ–∏–ª–∏—è</label><input type="file" onchange="read(this, 'leaf')"></div>

        <button class="btn-gen" onclick="exportGame()">–°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ INDEX.HTML</button>
    </div>

    <div id="preview">
        <div id="mockup">
            <div id="m-header">TITLE</div>
            <div id="m-q">QUESTION</div>
            <div class="m-leaf" style="left: 10%;" id="l1"></div>
            <div class="m-leaf" style="left: 40%;" id="l2"></div>
            <div class="m-leaf" style="left: 70%;" id="l3"></div>
            <div id="m-frog"></div>
        </div>
    </div>
</div>

<script>
    let assets = {
        bg: 'https://vivanova288-boop.github.io/Froggy_Jumps/bg.png',
        frog: 'https://vivanova288-boop.github.io/Froggy_Jumps/2.png',
        leaf: 'https://vivanova288-boop.github.io/Froggy_Jumps/1.png'
    };

    function read(input, type) {
        if (input.files && input.files[0]) {
            const r = new FileReader();
            r.onload = (e) => { assets[type] = e.target.result; upd(); };
            r.readAsDataURL(input.files[0]);
        }
    }

    function upd() {
        document.getElementById('m-header').innerText = document.getElementById('v-title').value;
        document.getElementById('m-header').style.backgroundColor = document.getElementById('v-color').value;
        const q = document.getElementById('v-qs').value.split('\n')[0].split('|');
        document.getElementById('m-q').innerText = q[0] || "...";
        document.getElementById('l1').innerText = q[1] || "";
        document.getElementById('l2').innerText = q[2] || "";
        document.getElementById('l3').innerText = q[3] || "";
        document.getElementById('mockup').style.backgroundImage = `url(${assets.bg})`;
        document.getElementById('m-frog').style.backgroundImage = `url(${assets.frog})`;
        document.querySelectorAll('.m-leaf').forEach(l => l.style.backgroundImage = `url(${assets.leaf})`);
    }

    function exportGame() {
        const title = document.getElementById('v-title').value;
        const color = document.getElementById('v-color').value;
        const questions = document.getElementById('v-qs').value;

        // –≠–¢–û–¢ –ö–û–î –ë–£–î–ï–¢ –í–ù–£–¢–†–ò –í–ê–®–ï–ì–û –ò–ù–î–ï–ö–°–ê
        const finalCode = `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>\${title}</title>
    <style>
        body { margin:0; overflow:hidden; background:#000; font-family:sans-serif; }
        #pond { width:100vw; height:100vh; background:url('\${assets.bg}') center/cover; position:relative; }
        #header { background:\${color}; color:#fff; padding:15px; text-align:center; font-size:22px; font-weight:bold; }
        #frog { position:absolute; width:80px; height:80px; background:url('\${assets.frog}') no-repeat center/contain; z-index:100; transition:0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .leaf { position:absolute; width:140px; height:90px; background:url('\${assets.leaf}') no-repeat center/contain; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:bold; cursor:pointer; }
        .shock { animation: shake 0.1s infinite; filter: brightness(2) hue-rotate(180deg); }
        @keyframes shake { 0%{transform:translate(2px,2px)} 100%{transform:translate(-2px,-2px)} }
        #q-box { background:#fff; color:#000; width:70%; margin:20px auto; padding:15px; border-radius:15px; text-align:center; font-weight:bold; box-shadow:0 5px 15px rgba(0,0,0,0.5); }
    </style>
</head>
<body>
    <div id="pond">
        <div id="header">\${title}</div>
        <div id="q-box"></div>
        <div id="frog"></div>
        <div id="leaves"></div>
    </div>
    <script>
        const rawQs = \${JSON.stringify(questions.split('\\n'))};
        let step = 0, lastLeaf;
        const frog = document.getElementById('frog');

        function init() {
            // –°–æ–∑–¥–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—É—é –ª–∏–ª–∏—é —Å—Ç–∞—Ä—Ç–∞
            const startLeaf = { offsetLeft: window.innerWidth/2 - 70, offsetTop: window.innerHeight - 150, offsetWidth: 140, offsetHeight: 90 };
            lastLeaf = startLeaf;
            moveFrog(startLeaf);
            loadQ();
        }

        function moveFrog(l) {
            frog.style.left = (l.offsetLeft + l.offsetWidth/2 - 40) + 'px';
            frog.style.top = (l.offsetTop + l.offsetHeight/2 - 40) + 'px';
        }

        function loadQ() {
            if(step >= rawQs.length) return alert("–ü–û–ë–ï–î–ê!");
            const [q, a, w1, w2] = rawQs[step].split('|');
            document.getElementById('q-box').innerText = q;
            const container = document.getElementById('leaves');
            container.innerHTML = '';
            
            const opts = [{t:a, ok:true}, {t:w1, ok:false}, {t:w2, ok:false}].sort(()=>Math.random()-0.5);
            opts.forEach((opt, i) => {
                const l = document.createElement('div');
                l.className = 'leaf';
                l.innerText = opt.t;
                l.style.left = (15 + i*30) + '%';
                l.style.top = '50%';
                l.onclick = () => {
                    moveFrog(l);
                    if(opt.ok) { step++; lastLeaf = l; setTimeout(loadQ, 600); }
                    else {
                        frog.classList.add('shock');
                        setTimeout(() => { 
                            moveFrog(lastLeaf); 
                            frog.classList.remove('shock');
                        }, 500);
                    }
                };
                container.appendChild(l);
            });
        }
        init();
    <\/script>
</body>
</html>`;

        const blob = new Blob([finalCode], {type: 'text/html'});
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = "index.html"; // –í–û–¢ –≠–¢–û–¢ –§–ê–ô–õ –°–ö–ê–ß–ê–ï–¢–°–Ø
        link.click();
    }

    window.onload = upd;
</script>
</body>
</html>
