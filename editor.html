<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        :root { --primary: #6ab04c; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 10px; font-size: 13px; }
        .tabs { display: flex; overflow-x: auto; border-bottom: 2px solid #ddd; margin-bottom: 10px; sticky: top; background: var(--bg); }
        .tab { padding: 8px 12px; cursor: pointer; border: none; background: none; font-weight: bold; color: #666; white-space: nowrap; }
        .tab.active { color: var(--primary); border-bottom: 2px solid var(--primary); }
        .content { display: none; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); margin-bottom: 60px; }
        .content.active { display: block; }
        .group { border: 1px solid #eee; padding: 10px; border-radius: 6px; margin-bottom: 15px; }
        .group-title { font-weight: bold; margin-bottom: 10px; color: var(--primary); text-transform: uppercase; font-size: 11px; }
        .field { margin-bottom: 10px; }
        label { display: block; margin-bottom: 4px; font-weight: 600; }
        input, textarea, select { width: 100%; padding: 7px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
        .row { display: flex; gap: 8px; flex-wrap: wrap; }
        .footer { position: fixed; bottom: 0; left: 0; right: 0; padding: 10px; background: white; border-top: 1px solid #ddd; }
        .btn-save { background: var(--primary); color: white; border: none; padding: 10px; width: 100%; border-radius: 6px; font-weight: bold; cursor: pointer; }
        textarea { height: 80px; font-family: monospace; }
    </style>
</head>
<body>

<div class="tabs">
    <button class="tab active" onclick="openTab(event, 'tab1')">üìù –ö–æ–Ω—Ç–µ–Ω—Ç</button>
    <button class="tab" onclick="openTab(event, 'tab2')">‚öôÔ∏è –ú–µ—Ö–∞–Ω–∏–∫–∞</button>
    <button class="tab" onclick="openTab(event, 'tab3')">üé® –í–∏–∑—É–∞–ª</button>
    <button class="tab" onclick="openTab(event, 'tab4')">üîä –ê—É–¥–∏–æ</button>
    <button class="tab" onclick="openTab(event, 'tab5')">üèÅ –§–∏–Ω–∞–ª/–Ø–∑—ã–∫</button>
</div>

<div id="tab1" class="content active">
    <div class="field"><label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–≥—Ä—ã</label><input type="text" id="title" value="PAST SIMPLE CHALLENGE"></div>
    <div class="field">
        <label>–í–æ–ø—Ä–æ—Å—ã (JSON)</label>
        <textarea id="questions">[{ "q": "I ___ to the park.", "a": ["went", "go", "gone"], "correct": 0, "level": 1 }]</textarea>
    </div>
    <div class="row">
        <div class="field"><label>–£—Ä–æ–≤–Ω–µ–π</label><input type="number" id="levelCount" value="1"></div>
        <div class="field"><label>–í–æ–ø—Ä–æ—Å–æ–≤ –≤ —É—Ä–æ–≤–Ω–µ</label><input type="number" id="qPerLevel" value="5"></div>
    </div>
    <div class="field">
        <label><input type="checkbox" id="shuffle" checked> –ü–µ—Ä–µ–º–µ—à–∏–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã</label>
    </div>
</div>

<div id="tab2" class="content">
    <div class="row">
        <div class="field"><label>–ñ–∏–∑–Ω–∏</label><input type="number" id="lives" value="5"></div>
        <div class="field"><label>–¢–∞–π–º–µ—Ä (—Å–µ–∫)</label><input type="number" id="timer" value="15"></div>
    </div>
    <div class="field"><label>–°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏</label>
        <select id="animSpeed"><option value="normal">–û–±—ã—á–Ω–∞—è</option><option value="fast">–ë—ã—Å—Ç—Ä–∞—è</option></select>
    </div>
    <div class="field"><label><input type="checkbox" id="timerOn" checked> –í–∫–ª—é—á–∏—Ç—å —Ç–∞–π–º–µ—Ä</label></div>
</div>

<div id="tab3" class="content">
    <div class="group">
        <div class="group-title">–¶–≤–µ—Ç–∞</div>
        <div class="row">
            <input type="color" id="colorHeader" value="#6ab04c">
            <input type="color" id="colorTimer" value="#ff4757">
            <input type="color" id="colorBtn" value="#2f3542">
        </div>
    </div>
    <div class="field"><label>–§–æ–Ω (URL)</label><input type="text" id="bgImg" value="bg.png"></div>
    <div class="field"><label>–õ—è–≥—É—à–∫–∞ (URL)</label><input type="text" id="imgFrog" value="1.png"></div>
    <div class="field"><label>–õ–∏—Å—Ç—å—è (URL)</label><input type="text" id="imgLeaf" value="2.png"></div>
    <div class="field"><label>–ò–∫–æ–Ω–∫–∞ –∂–∏–∑–Ω–∏ (URL)</label><input type="text" id="imgHeart" value="3.png"></div>
    <div class="field"><label>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ (px)</label><input type="number" id="fontSize" value="22"></div>
</div>

<div id="tab4" class="content">
    <div class="field"><label><input type="checkbox" id="soundOn" checked> –ó–≤—É–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã</label></div>
    <div class="field"><label>–ì—Ä–æ–º–∫–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</label><input type="range" id="volume" min="0" max="1" step="0.1" value="0.5"></div>
    <div class="group">
        <div class="group-title">–ó–∞–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (URL)</div>
        <div class="field"><label>–§–æ–Ω (Ambience)</label><input type="text" id="sndBg" value="7.mp3"></div>
        <div class="field"><label>–í–µ—Ä–Ω–æ</label><input type="text" id="sndCorrect" value="4.mp3"></div>
        <div class="field"><label>–û—à–∏–±–∫–∞</label><input type="text" id="sndError" value="5.mp3"></div>
    </div>
</div>

<div id="tab5" class="content">
    <div class="field"><label>–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
        <select id="lang"><option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="en">English</option></select>
    </div>
    <div class="field"><label>–¢–µ–∫—Å—Ç –ü–æ–±–µ–¥—ã</label><input type="text" id="txtWin" value="–£–†–†–ê! –¢–´ –ü–û–ë–ï–î–ò–õ!"></div>
    <div class="field"><label>–¢–µ–∫—Å—Ç –ü–æ—Ä–∞–∂–µ–Ω–∏—è</label><input type="text" id="txtLose" value="–û–ô! –ü–û–ü–†–û–ë–£–ô –ï–©–ï –†–ê–ó"></div>
    <div class="field"><label><input type="checkbox" id="btnRetry" checked> –ö–Ω–æ–ø–∫–∞ "–°–Ω–æ–≤–∞"</label></div>
</div>

<div class="footer">
    <button class="btn-save" onclick="saveSettings()">–û–ë–ù–û–í–ò–¢–¨ –ò–ì–†–£</button>
</div>

<script>
    function openTab(evt, tabName) {
        let contents = document.getElementsByClassName("content");
        for (let i = 0; i < contents.length; i++) contents[i].classList.remove("active");
        let tabs = document.getElementsByClassName("tab");
        for (let i = 0; i < tabs.length; i++) tabs[i].classList.remove("active");
        document.getElementById(tabName).classList.add("active");
        evt.currentTarget.classList.add("active");
    }

    function saveSettings() {
        const s = {
            title: document.getElementById('title').value,
            questions: JSON.parse(document.getElementById('questions').value),
            levelCount: document.getElementById('levelCount').value,
            shuffle: document.getElementById('shuffle').checked,
            lives: document.getElementById('lives').value,
            timer: document.getElementById('timer').value,
            timerOn: document.getElementById('timerOn').checked,
            animSpeed: document.getElementById('animSpeed').value,
            colors: { h: document.getElementById('colorHeader').value, t: document.getElementById('colorTimer').value, b: document.getElementById('colorBtn').value },
            images: { bg: document.getElementById('bgImg').value, frog: document.getElementById('imgFrog').value, leaf: document.getElementById('imgLeaf').value, heart: document.getElementById('imgHeart').value },
            audio: { on: document.getElementById('soundOn').checked, vol: document.getElementById('volume').value, bg: document.getElementById('sndBg').value },
            final: { win: document.getElementById('txtWin').value, lose: document.getElementById('txtLose').value, retry: document.getElementById('btnRetry').checked },
            lang: document.getElementById('lang').value
        };
        window.parent.postMessage({ type: 'config', settings: s }, '*');
    }
</script>
</body>
</html>
