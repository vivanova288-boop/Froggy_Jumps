<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Froggy Jumps Quiz</title>

<style>
:root {
    --water1: #2bbcd6;
    --water2: #168ea0;
    --ui-bg: #6ab04c;
}

html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    font-family: Arial, sans-serif;
    /* –î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
    background: url('bg.png') no-repeat center center fixed;
    background-size: cover;
}

/* ---------- UI ---------- */
#ui-layer {
    position: absolute;
    top: 0;
    width: 100%;
    z-index: 1000;
    pointer-events: none;
}

#header {
    background: var(--ui-bg);
    color: white;
    padding: 10px;
    text-align: center;
    font-weight: bold;
    pointer-events: auto;
}

#lives-container {
    position: absolute;
    top: 50px;
    left: 20px;
    display: flex;
    gap: 8px;
    pointer-events: auto;
}

.life-icon {
    width: 52px;
    height: 52px;
    background: url('3.png') no-repeat center / contain;
    filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
    transition: transform 0.2s;
}

.life-icon:last-child {
    animation: pulse-life 0.8s ease-in-out infinite alternate;
}

@keyframes pulse-life {
    from { transform: scale(1); }
    to   { transform: scale(1.15); }
}


#question-box {
    background: white;
    width: 85%;
    max-width: 500px;
    margin: 10px auto;
    padding: 12px;
    border-radius: 18px;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    pointer-events: auto;
}

.timer-bar {
    width: 100%;
    height: 8px;
    background: #dfe6e9;
    border-radius: 5px;
    margin-top: 8px;
    overflow: hidden;
}

#timer-fill {
    width: 100%;
    height: 100%;
    background: #eb4d4b;
    transition: width 0.1s linear;
}

/* ---------- GAME WORLD ---------- */
#world {
    position: absolute;
    inset: 0;
    /* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É, —á—Ç–æ–±—ã –ø–æ–¥–Ω—è—Ç—å –≤—Å—ë –≤—ã—à–µ –∫ –≤–æ–ø—Ä–æ—Å—É */
    padding-top: 60px; 
    overflow: hidden;
}

#pond {
    position: relative;
    width: 100%; /* –ú–æ–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å 98%, –µ—Å–ª–∏ –ª–∏—Å—Ç—å—è —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ –∫—Ä–∞—è–º */
    height: 100%;
    margin: 0 auto;
    overflow: hidden; 
}

/* ---------- LEAVES ---------- */
.leaf {
    position: absolute;
   width: 20vw;         /* –ë—ã–ª–æ 15vw */
    height: 16vw;        /* –ë—ã–ª–æ 12vw */
    max-width: 180px;    /* –ë—ã–ª–æ 140px */
    max-height: 150px;   /* –ë—ã–ª–æ 115px */
    background: url('1.png') no-repeat center / contain;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1; 
    transform: scale(0.85); 
    transition: transform 0.4s, opacity 0.4s;
    
    /* –£–ª—É—á—à–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ */
    padding: 15px;       /* –ù–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø –¥–ª—è —Ç–µ–∫—Å—Ç–∞ */
    box-sizing: border-box;
    text-align: center;
    font-size: 22px;     /* –£–≤–µ–ª–∏—á–∏–ª–∏ —à—Ä–∏—Ñ—Ç –¥–ª—è –±–æ–ª—å—à–∏—Ö –ª–∏—Å—Ç—å–µ–≤ */
    color: white;
    font-weight: bold;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8), -1px -1px 3px rgba(0,0,0,0.8);
}

.leaf.active {
    opacity: 1;
    transform: scale(1.1); /* –°–¥–µ–ª–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –ª–∏—Å—Ç–∏–∫ —á—É—Ç—å –±–æ–ª—å—à–µ */
    z-index: 10;
    cursor: pointer;
    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.9));
}

.leaf.active::after {
    content: attr(data-letter);
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    background: #f1c40f;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    font-size: 13px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    text-shadow: none;
    color: black;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏—è –ª–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–∏ */
@keyframes leaf-bounce {
    0% { transform: scale(1.1) translateY(0); }
    50% { transform: scale(1.1) translateY(5px); }
    100% { transform: scale(1.1) translateY(0); }
}

.leaf-landed {
    animation: leaf-bounce 0.4s ease-out;
}

/* ---------- FROG ---------- */
/* –ò–∑–º–µ–Ω—è–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ª—è–≥—É—à–∫–∏, —á—Ç–æ–±—ã –ª–∞–ø–∫–∏ –Ω–µ –≤–∏—Å–µ–ª–∏ –≤ –≤–æ–∑–¥—É—Ö–µ */
#frog {
    opacity: 0;
    position: absolute;
    width: 10vw;         /* –ë—ã–ª–æ 90px */
    height: 10vw;        /* –ë—ã–ª–æ 90px */
    max-width: 90px;
    max-height: 90px;
    background: url('2.png') no-repeat center / contain;
    /* –°–¥–≤–∏–≥–∞–µ–º –ª—è–≥—É—à–∫—É —á—É—Ç—å –Ω–∏–∂–µ (–Ω–∞ 60% –≤–º–µ—Å—Ç–æ 50%), —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ –ª–∏—Å—Ç–∞ */
    transform: translate(-50%, -60%) scale(1.15); 
    filter: drop-shadow(0 10px 15px rgba(0,0,0,0.4));
    z-index: 999 !important; /* –î–µ–ª–∞–µ–º –ª—è–≥—É—à–∫—É —Å–∞–º—ã–º –≤–µ—Ä—Ö–Ω–∏–º —Å–ª–æ–µ–º */
    transition: left 0.6s cubic-bezier(.47,1.21,.58,1), 
                top 0.6s cubic-bezier(.47,1.21,.58,1), 
                transform 0.3s ease-out;
    pointer-events: none;
	transition: left 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                top 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.shock {
    animation: electric-shock 0.1s infinite;
    /* –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ª–∏—Å—Ç–∫–∞ –ø–æ–¥ —Ç–æ–∫–æ–º z-index –º–µ–Ω—å—à–µ, —á–µ–º 999 */
    z-index: 10 !important; 
}

.sink {
    transform: translate(-50%, -50%) scale(0) !important;
    opacity: 0 !important;
}

/* ---------- OVERLAY ---------- */
#overlay {
    position: fixed;
    inset: 0;
    /* –£–±–∏—Ä–∞–µ–º —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å rgba(0,0,0,0.3) */
    background: transparent; 
    z-index: 2000;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞, –≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–∏–¥–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ —á–µ—Ä–Ω—ã–π, –µ—Å–ª–∏ —Ñ–æ–Ω –æ—á–µ–Ω—å —Å–≤–µ—Ç–ª—ã–π */
    text-shadow: 2px 2px 4px rgba(0,0,0,0.7); /* –¢–µ–Ω—å –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –Ω–∞ –ª—é–±–æ–º —Ñ–æ–Ω–µ */
}

/* –î–æ–±–∞–≤–∏–º —Å—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø–æ–±–µ–¥–µ, —á—Ç–æ–±—ã –æ–Ω–æ –±—ã–ª–æ –∑–∞–º–µ—Ç–Ω–µ–µ */
#msg {
    font-size: 3em;
    animation: bounceIn 1s ease-out; /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ */
}

@keyframes bounceIn {
    0%, 20%, 40%, 60%, 80%, 100% {
        -webkit-transition-timing-function: cubic-bezier(0.215, .61, .355, 1);
        transition-timing-function: cubic-bezier(0.215, .61, .355, 1);
    }
    0% {
        opacity: 0;
        -webkit-transform: scale3d(.3, .3, .3);
        transform: scale3d(.3, .3, .3);
    }
    20% {
        -webkit-transform: scale3d(1.1, 1.1, 1.1);
        transform: scale3d(1.1, 1.1, 1.1);
    }
    40% {
        -webkit-transform: scale3d(.9, .9, .9);
        transform: scale3d(.9, .9, .9);
    }
    60% {
        opacity: 1;
        -webkit-transform: scale3d(1.03, 1.03, 1.03);
        transform: scale3d(1.03, 1.03, 1.03);
    }
    80% {
        -webkit-transform: scale3d(.97, .97, .97);
        transform: scale3d(.97, .97, .97);
    }
    100% {
        opacity: 1;
        -webkit-transform: scale3d(1, 1, 1);
        transform: scale3d(1, 1, 1);
    }
}

button {
    padding: 15px 45px;
    border-radius: 30px;
    border: none;
    background: var(--ui-bg);
    color: white;
    font-size: 18px;
    cursor: pointer;
    margin-top: 20px;
}

    /* –£–¥–∞–ª—è–µ—Ç –∂–µ–ª—Ç—ã–π –∫—Ä—É–∂–æ–∫, –µ—Å–ª–∏ —É –ª–∏—Å—Ç–∞ –Ω–µ—Ç –∞—Ç—Ä–∏–±—É—Ç–∞ data-letter */
.leaf.active:not([data-letter])::after {
    display: none;
}
/* –ê–Ω–∏–º–∞—Ü–∏—è —É–¥–∞—Ä–∞ —Ç–æ–∫–æ–º (—Ç—Ä—è—Å–∫–∞ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞) */
@keyframes electric-shock {
    0% { transform: scale(1.1) translate(2px, 2px); filter: brightness(1.5) hue-rotate(180deg); }
    25% { transform: scale(1.1) translate(-2px, -2px); }
    50% { transform: scale(1.1) translate(2px, -2px); }
    75% { transform: scale(1.1) translate(-2px, 2px); }
    100% { transform: scale(1.1) translate(0, 0); filter: brightness(1); }
}

.shock {
    animation: electric-shock 0.1s infinite;
    z-index: 20 !important;
}

#fireworksCanvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2001; /* –ß—É—Ç—å –≤—ã—à–µ —Ñ–æ–Ω–∞ */
    pointer-events: none; /* –ß—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª –Ω–∞–∂–∏–º–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É */
}

#msg {
    position: relative;
    z-index: 2005;
    font-size: 80px; /* –û—á–µ–Ω—å –∫—Ä—É–ø–Ω–æ */
    font-weight: 900;
    text-transform: uppercase;
    color: #ffcc00; /* –ó–æ–ª–æ—Ç–∏—Å—Ç—ã–π —Ü–≤–µ—Ç */
    text-shadow: 0 0 20px #ff4500, 4px 4px 0px #333; /* –î–≤–æ–π–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
    margin-bottom: 30px;
    letter-spacing: 5px;
}

#overlay button {
    position: relative;
    z-index: 2005;
    padding: 20px 60px;
    font-size: 24px;
    font-weight: bold;
    text-transform: uppercase;
    background: linear-gradient(145deg, #ff4e50, #f9d423); /* –ì—Ä–∞–¥–∏–µ–Ω—Ç */
    border: 4px solid #fff;
    border-radius: 50px;
    color: #fff;
    cursor: pointer;
    box-shadow: 0 10px 20px rgba(0,0,0,0.4), inset 0 0 10px rgba(255,255,255,0.5);
    transition: transform 0.2s, box-shadow 0.2s;
}

#overlay button:hover {
    transform: scale(1.1) translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.6);
}
/* –ê–Ω–∏–º–∞—Ü–∏—è "–ø—Ä–æ–ø–ª—ã–≤–∞–Ω–∏—è" –ø—Ä—É–¥–∞ –≤–Ω–∏–∑ */
@keyframes pond-slide {
    0% { transform: translateY(0); opacity: 1; }
    50% { transform: translateY(100vh); opacity: 0; }
    51% { transform: translateY(-100vh); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
}

.pond-transition {
    animation: pond-slide 1.2s ease-in-out;
}

/* –≠—Ñ—Ñ–µ–∫—Ç —Å—É–ø–µ—Ä-–ø—Ä—ã–∂–∫–∞ –¥–ª—è –ª—è–≥—É—à–∫–∏ */
.super-jump {
    top: -200px !important;
    transform: translate(-50%, -50%) scale(2) rotate(360deg) !important;
    transition: top 0.8s cubic-bezier(.47,1.21,.58,1), transform 0.8s !important;
}
/* –≠—Ñ—Ñ–µ–∫—Ç –≤—Å–ø–ª–µ—Å–∫–∞ –≤–æ–¥—ã */
.splash {
    position: absolute;
    border: 4px solid rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    animation: splash-ani 0.6s ease-out forwards;
    z-index: 5;
}

@keyframes splash-ani {
    0% { width: 0; height: 0; opacity: 1; border-width: 4px; }
    100% { width: 150px; height: 80px; opacity: 0; border-width: 1px; }
}
#volume-control {
    position: absolute;
    top: 50px;
    right: 20px;
    background: rgba(255, 255, 255, 0.9);
    padding: 8px 15px;
    border-radius: 25px;
    display: flex;
    align-items: center;
    gap: 10px;
    /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º z-index, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –≤—ã—à–µ –≤—Å–µ—Ö UI —Å–ª–æ–µ–≤ */
    z-index: 2000; 
    /* –Ø–≤–Ω–æ —Ä–∞–∑—Ä–µ—à–∞–µ–º –∫–ª–∏–∫–∏ */
    pointer-events: auto; 
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    border: 2px solid var(--ui-bg);
}

#volume-slider {
    cursor: pointer;
    accent-color: var(--ui-bg);
    width: 80px;
}
/* –¶–≤–µ—Ç–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è –∏–∫–æ–Ω–∫–∞ */
#speaker-icon {
    font-size: 20px;
    transition: filter 0.3s, opacity 0.3s;
    filter: drop-shadow(0 0 2px rgba(0,0,0,0.2));
    display: inline-block;
    position: relative;
}

/* –≠—Ñ—Ñ–µ–∫—Ç –ø–µ—Ä–µ—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è –¥–ª—è –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –∑–≤—É–∫–∞ */
.muted-icon {
    filter: grayscale(1) !important; /* –î–µ–ª–∞–µ–º —á–µ—Ä–Ω–æ-–±–µ–ª–æ–π */
    opacity: 0.6;
}

.muted-icon::after {
    content: "";
    position: absolute;
    top: 50%;
    left: -2px;
    width: 110%;
    height: 3px;
    background-color: #eb4d4b; /* –ö—Ä–∞—Å–Ω–∞—è –ª–∏–Ω–∏—è */
    transform: rotate(-45deg);
    border-radius: 2px;
}
/* –¶–≤–µ—Ç —Å–∞–º–æ–≥–æ –∫–æ—Ä–ø—É—Å–∞ –¥–∏–Ω–∞–º–∏–∫–∞ */
.speaker-body {
    fill: #6ab04c; /* –ó–µ–ª–µ–Ω—ã–π –ø–æ–¥ —Å—Ç–∏–ª—å –∏–≥—Ä—ã */
    transition: fill 0.3s;
}

/* –¶–≤–µ—Ç –∑–≤—É–∫–æ–≤—ã—Ö –≤–æ–ª–Ω */
.speaker-waves {
    transition: opacity 0.3s, stroke 0.3s;
}

/* –ö–æ–≥–¥–∞ –∑–≤—É–∫ –≤—ã–∫–ª—é—á–µ–Ω (—á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å muted-icon) */
.muted-icon .speaker-body {
    fill: #95a5a6; /* –°–µ—Ä—ã–π –∫–æ—Ä–ø—É—Å */
}
.muted-icon .speaker-waves {
    opacity: 0; /* –í–æ–ª–Ω—ã –∏—Å—á–µ–∑–∞—é—Ç */
}
/* –ö–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–∫–ª—é—á–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –ø–æ–ª–µ—Ç–∞ */
.jumping-frog {
    filter: drop-shadow(0 30px 20px rgba(0,0,0,0.3)) !important;
    transform: translate(-50%, -80%) scale(1.4) !important; /* –í–∑–ª–µ—Ç–∞–µ—Ç –≤—ã—à–µ –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ */
}
@keyframes count-pulse {
    0% { transform: scale(0.5); opacity: 0; }
    50% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1); opacity: 0; }
}

.count-animate {
    animation: count-pulse 1s ease-out forwards;
}

</style>
</head>

<body>

<div id="countdown-overlay" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.3); z-index: 3000; justify-content: center; align-items: center; pointer-events: auto;">
    <div id="countdown-text" style="font-size: 150px; color: #fff; font-weight: bold; text-shadow: 0 0 20px rgba(0,0,0,0.5); font-family: Arial, sans-serif;"></div>
</div>

<div id="ui-layer">
    <div id="header">PAST SIMPLE CHALLENGE</div>
    <div id="lives-container"></div>
    <div id="question-box">
        <div id="q-text"><b>Preparing...</b></div>
        <div class="timer-bar"><div id="timer-fill"></div></div>
    </div>
</div>
<div id="volume-control">
    <div id="speaker-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="speaker-body" d="M11 5L6 9H2V15H6L11 19V5Z" fill="#6ab04c" stroke="#2d3436" stroke-width="1.5"/>
            <path class="speaker-waves" d="M15.54 8.46C16.5 9.42 17.04 10.72 17.04 12C17.04 13.28 16.5 14.58 15.54 15.54" stroke="#2bbcd6" stroke-width="2" stroke-linecap="round"/>
            <path class="speaker-waves" d="M19.07 4.93C21.02 6.88 22.12 9.44 22.12 12C22.12 14.56 21.02 17.12 19.07 19.07" stroke="#2bbcd6" stroke-width="2" stroke-linecap="round"/>
        </svg>
    </div> 
    <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.5">
</div>
<div id="world">
    <div id="pond">
        <div id="frog"></div>
    </div>
</div>

<div id="overlay">
    <h1 id="msg">Game Over</h1>
    <canvas id="fireworksCanvas"></canvas> <button onclick="initGame()">Try Again</button>
</div>

<script>
// –í—Å—Ç–∞–≤—å —ç—Ç–æ –≤ –Ω–∞—á–∞–ª–æ —Å–≤–æ–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –≤ game.html
// 1. –ò–∑–Ω–∞—á–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ø—É—Å—Ç—ã–µ –∏–ª–∏ "–∑–∞–≥–ª—É—à–∫–∏")
let config = {
    title: "Loading...",
    lives: 5,
    questions: []
};

// 2. –°–õ–£–®–ê–¢–ï–õ–¨: –ñ–¥–µ–º –¥–∞–Ω–Ω—ã–µ –æ—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
window.addEventListener('message', (event) => {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—Ä–∏—à–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    if (event.data && event.data.type === 'config') {
        config = event.data.settings;
        applyConfig(); // –û–±–Ω–æ–≤–ª—è–µ–º –∏–≥—Ä—É
    }
});

function applyConfig() {
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –∏–≥—Ä—ã
    document.getElementById('header').textContent = config.title;
    lives = parseInt(config.lives);
    updateLives(); // —Ç–≤–æ—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å–µ—Ä–¥–µ—á–µ–∫
    
    // –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∏—à–ª–∏, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Ö
    if (config.questions && config.questions.length > 0) {
        // –ú—ã –º–æ–∂–µ–º –∑–∞–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–Ω–∏ –Ω–∞ —Ç–µ, —á—Ç–æ –ø—Ä–∏—Å–ª–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        levelsBank[1] = config.questions; 
    }

    // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    initGame(); 
}

// –¢–í–û–ò –ü–ï–†–ï–ú–ï–ù–ù–´–ï (—Ç–µ–ø–µ—Ä—å –æ–Ω–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç config)
let currentLevel = 1; 
let step = 0;
let globalVolume = 0.5;
// ... –¥–∞–ª—å—à–µ –∏–¥–µ—Ç —Ç–≤–æ–π –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

function applySettingsAndStart() {
    // –ó–¥–µ—Å—å –º—ã –±–µ—Ä–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ config –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –≤ –∏–≥—Ä—É
    document.getElementById('header').innerText = config.title;
    lives = config.lives;
    // ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    initGame(); 
}
let currentLevel = 1; 
let step = 0;
let lives = 5;
let countdownRunning = false;
let questions = [];
let timer;
let lastCorrectLeaf;
let globalVolume = 0.5;

// –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
const sounds = {
    splash: new Audio('1.mp3'),
    shock: new Audio('2.mp3'),
    victory: new Audio('3.mp3'),
    gameOver: new Audio('4.mp3'),
    start: new Audio('5.mp3'),
    levelUp: new Audio('6.mp3'),
	count: new Audio('7.mp3')
};

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è —Å —É—á–µ—Ç–æ–º –≥—Ä–æ–º–∫–æ—Å—Ç–∏
function playSound(audio) {
    if (!audio) return;
    audio.currentTime = 0;
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π globalVolume –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ–º
    audio.volume = globalVolume; 
    audio.play().catch(e => console.log("Audio blocked"));
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –≤—Å–µ—Ö –∑–≤—É–∫–æ–≤
document.addEventListener('DOMContentLoaded', () => {
    const slider = document.getElementById('volume-slider');
    const speaker = document.getElementById('speaker-icon');
    
    slider.value = globalVolume;

    slider.addEventListener('input', (e) => {
    globalVolume = parseFloat(e.target.value);
    updateAllVolumes(); // –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –∑–≤—É–∫–æ–≤

    if (globalVolume === 0) {
        speaker.classList.add('muted-icon');
    } else {
        speaker.classList.remove('muted-icon');
    }
});
});

const pond = document.getElementById('pond');
const frog = document.getElementById('frog');

function createPond() {
    const leaves = pond.querySelectorAll('.leaf');
    leaves.forEach(l => l.remove());
    const rows = 7;
    const cols = 5; 
    
    // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Ç—è–∂–µ–Ω–∏—è: —á–µ–º –≤—ã—à–µ —á–∏—Å–ª–æ, —Ç–µ–º —à–∏—Ä–µ —Å—Ç–æ—è—Ç –ª–∏—Å—Ç—å—è
    const horizontalSpread = 1.2; 

    for (let r = 0; r < rows; r++) {
        for (let c = 0; c < cols; c++) {
            if (c > 0 && c < 4) {
                const leaf = document.createElement('div');
                leaf.className = 'leaf';
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –±–∞–∑–æ–≤—ã–π —Ü–µ–Ω—Ç—Ä
                const columnWidth = 100 / (cols - 1); 
                const rowOffset = (r % 2 === 0) ? 0 : (columnWidth / 2);
                
                // –í—ã—á–∏—Å–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∏ –ø—Ä–∏–º–µ–Ω—è–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Ç—è–∂–µ–Ω–∏—è –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ —ç–∫—Ä–∞–Ω–∞
                let leftPos = (c * columnWidth + rowOffset);
                // –°–¥–≤–∏–≥–∞–µ–º –≤—Å—ë —Ç–∞–∫, —á—Ç–æ–±—ã —Ü–µ–Ω—Ç—Ä –æ—Å—Ç–∞–≤–∞–ª—Å—è –≤ —Ü–µ–Ω—Ç—Ä–µ (50%), –∏ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º
                leftPos = 50 + (leftPos - 62.5) * horizontalSpread; 

                leaf.style.left = leftPos + '%';
                
                // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (–æ—Å—Ç–∞–≤–ª—è–µ–º –≤—ã—Å–æ–∫—É—é, –∫–∞–∫ –≤ –ø—Ä–æ—à–ª–æ–º —à–∞–≥–µ)
               const verticalPosition = (r / (rows - 1)) * 68 + 12; 
                leaf.style.top = verticalPosition + '%';

                leaf.id = `leaf-${r}-${c}`;
                pond.appendChild(leaf);
            }
        }
    }
}

function initGame() {
    pond.classList.remove('pond-transition');
    const overlay = document.getElementById('countdown-overlay');
    const countText = document.getElementById('countdown-text');
    document.getElementById('overlay').style.display = 'none';

    // –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
    sounds.count.pause();
    sounds.count.currentTime = 0;

    currentLevel = 1;
    step = 0;
    lives = 5;
    updateLives();
    createPond();

    overlay.style.display = 'flex';

    const steps = ['3', '2', '1', 'GO!'];
    let i = 0;

    // üîπ –ü–û–ö–ê–ó–´–í–ê–ï–ú –ü–ï–†–í–´–ô –ö–ê–î–† –°–†–ê–ó–£
    countText.textContent = steps[i];
    countText.classList.remove('count-animate');
    void countText.offsetWidth;
    countText.classList.add('count-animate');

    // üîä –ò –°–†–ê–ó–£ –°–¢–ê–†–¢–£–ï–ú –ó–í–£–ö
    playSound(sounds.count);
    i++;

    const timerInterval = setInterval(() => {
        if (i < steps.length) {
            countText.textContent = steps[i];
            countText.classList.remove('count-animate');
            void countText.offsetWidth;
            countText.classList.add('count-animate');
            i++;
        } else {
            clearInterval(timerInterval);
            overlay.style.display = 'none';
            frog.style.opacity = 1;
            startGameLogic();
        }
    }, 1000);
}





// –í—ã–Ω–µ—Å–µ–º –ª–æ–≥–∏–∫—É –∑–∞–ø—É—Å–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
// –ó–∞–º–µ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é startGameLogic –Ω–∞ —ç—Ç—É:
function startGameLogic() {
    playSound(sounds.start); 
    document.getElementById('header').textContent = `PAST SIMPLE CHALLENGE - LEVEL ${currentLevel}`;
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π —Å–ª—É—á–∞–π–Ω—ã–π –Ω–∞–±–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
    questions = [...levelsBank[currentLevel]]
        .sort(() => Math.random() - 0.5)
        .slice(0, 6); 
    
    frog.classList.remove('sink', 'super-jump', 'shock');
    lastCorrectLeaf = document.getElementById('leaf-6-2');
    
    // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ª–∏—Å—Ç—å—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º
    document.querySelectorAll('.leaf').forEach(l => l.classList.remove('active', 'leaf-landed', 'shock'));
    lastCorrectLeaf.classList.add('active'); 

    frog.style.transition = "none"; 
    updateFrog(lastCorrectLeaf);
    
    setTimeout(() => {
        frog.style.transition = "left 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275), top 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)";
        loadLevel();
    }, 50);
}

function updateLives() {
    const c = document.getElementById('lives-container');
    c.innerHTML = '';
    for (let i = 0; i < lives; i++) {
        const l = document.createElement('div');
        l.className = 'life-icon';
        c.appendChild(l);
    }
}

function loadLevel() {
   // –ù–∞–π–¥–∏ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ loadLevel –±–ª–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∞ (if (levelsBank[currentLevel + 1])) 
// –∏ –æ–±–Ω–æ–≤–∏ —Å—Ç—Ä–æ–∫—É —Å –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ–º questions:

if (step >= questions.length) {
    if (levelsBank[currentLevel + 1]) {
        frog.classList.add('super-jump');
        playSound(sounds.levelUp); 
        setTimeout(() => {
            pond.classList.add('pond-transition');
            setTimeout(() => {
                currentLevel++;
                step = 0;
                
                // –í–ê–ñ–ù–û: –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –ù–û–í–û–ì–û —É—Ä–æ–≤–Ω—è
                questions = [...levelsBank[currentLevel]]
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 6);
                
                document.getElementById('header').textContent = `PAST SIMPLE CHALLENGE - LEVEL ${currentLevel}`;
                frog.classList.remove('super-jump');
                frog.style.transition = "none"; 
                lastCorrectLeaf = document.getElementById('leaf-6-2');
                updateFrog(lastCorrectLeaf);
                setTimeout(() => {
                    pond.classList.remove('pond-transition');
                    frog.style.transition = "left 0.6s cubic-bezier(.47,1.21,.58,1), top 0.6s cubic-bezier(.47,1.21,.58,1), transform 0.3s ease-out";
                    loadLevel();
                }, 50);
            }, 600);
        }, 400); 
        return;
    } else {
        showEnd("Victory!");
        return;
    }
}
    document.querySelectorAll('.leaf.active').forEach(l => {
        l.classList.remove('active', 'leaf-landed');
        l.textContent = '';
        l.onclick = null;
        delete l.dataset.letter; 
    });

    if (lastCorrectLeaf) {
        lastCorrectLeaf.classList.add('active'); 
    }

    const q = questions[step];
    document.getElementById('q-text').innerHTML = `<b>Q${step+1}:</b> ${q.q}`;

    const row = 5 - step;
    [1,2,3].forEach((c,i) => {
        const leaf = document.getElementById(`leaf-${row}-${c}`);
        if(leaf) {
            leaf.classList.add('active');
            leaf.dataset.letter = String.fromCharCode(65+i);
            leaf.textContent = q.options[i];
            leaf.onclick = () => handleJump(i, leaf);
        }
    });

    startTimer();
}

function handleJump(i, leaf) {
    clearInterval(timer);
    updateFrog(leaf);

    if (i === questions[step].correct) {
        lastCorrectLeaf = leaf;
        leaf.classList.add('leaf-landed');
        playSound(sounds.splash);

        setTimeout(() => {
            const x = leaf.offsetLeft + leaf.offsetWidth / 2;
            const y = leaf.offsetTop + leaf.offsetHeight / 2;
            createSplash(x, y);
        }, 300); 

        setTimeout(() => {
            step++;
            loadLevel();
        }, 700); 
    } else {
        // --- –í–û–¢ –≠–¢–û–¢ –ë–õ–û–ö –ú–´ –û–ë–ù–û–í–ò–õ–ò ---
        playSound(sounds.shock);
        leaf.classList.add('shock'); 
        frog.classList.add('shock'); // –õ—è–≥—É—à–∫—É –±—å–µ—Ç —Ç–æ–∫–æ–º
        
        lives--;
        updateLives();

        setTimeout(() => {
            updateFrog(lastCorrectLeaf); // –õ—è–≥—É—à–∫–∞ –æ—Ç—Å–∫–∞–∫–∏–≤–∞–µ—Ç –Ω–∞–∑–∞–¥
            
            setTimeout(() => {
                leaf.classList.remove('shock');
                frog.classList.remove('shock'); // –≠—Ñ—Ñ–µ–∫—Ç —Ç–æ–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç
            }, 300);

            if (lives <= 0) {
                showEnd("Game Over");
            } else {
                setTimeout(() => loadLevel(), 400);
            }
        }, 150); // –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –æ—Ç—Å–∫–æ—á–∏—Ç—å –Ω–∞–∑–∞–¥
        // --------------------------------
    }
}
function createSplash(x, y) {
    const splash = document.createElement('div');
    splash.className = 'splash';
    splash.style.left = x + 'px';
    splash.style.top = y + 'px';
    pond.appendChild(splash);
    setTimeout(() => splash.remove(), 600);
}

function updateFrog(leaf) {
    if (frog.classList.contains('super-jump')) return; 
    
    const targetX = leaf.offsetLeft + (leaf.offsetWidth / 2);
    const targetY = leaf.offsetTop + (leaf.offsetHeight / 2);
    
    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–≤–∏–º –ª—è–≥—É—à–∫—É –≤—ã—à–µ –≤—Å–µ—Ö –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—Ä—ã–∂–∫–µ
    frog.style.zIndex = "999"; 
    
    frog.classList.add('jumping-frog');
    
    frog.style.left = targetX + 'px';
    frog.style.top = targetY + 'px';
    
    setTimeout(() => {
        frog.classList.remove('jumping-frog');
    }, 600);
}

function startTimer() {
    let t = 100;
    clearInterval(timer);

    timer = setInterval(() => {
        t -= 0.6;
        document.getElementById('timer-fill').style.width = t + '%';
        if (t <= 0) {
            clearInterval(timer);
            showEnd("Out of time!");
        }
    }, 100);
}


const fireworksCanvas = document.getElementById('fireworksCanvas');
const ctx = fireworksCanvas.getContext('2d');
let particles = [];
let animationFrameId;

function setCanvasSize() {
    fireworksCanvas.width = window.innerWidth;
    fireworksCanvas.height = window.innerHeight;
}
window.addEventListener('resize', setCanvasSize);
setCanvasSize();

class Particle {
    constructor(x, y, color, speed) {
        this.x = x; this.y = y; this.color = color; this.speed = speed;
        this.angle = Math.random() * Math.PI * 2;
        this.velocity = { x: Math.cos(this.angle) * this.speed, y: Math.sin(this.angle) * this.speed };
        this.friction = 0.99; this.gravity = 0.05; this.alpha = 1;
        this.decay = Math.random() * 0.03 + 0.01;
    }
    draw() {
        ctx.save(); ctx.globalAlpha = this.alpha; ctx.beginPath();
        ctx.arc(this.x, this.y, 2, 0, Math.PI * 2); ctx.fillStyle = this.color;
        ctx.fill(); ctx.restore();
    }
    update() {
        this.velocity.x *= this.friction; this.velocity.y *= this.friction;
        this.velocity.y += this.gravity; this.x += this.velocity.x; this.y += this.velocity.y;
        this.alpha -= this.decay;
    }
}

function createFireworks(x, y) {
    const hue = Math.random() * 360;
    const color = `hsl(${hue}, 100%, 50%)`;
    for (let i = 0; i < 50; i++) { particles.push(new Particle(x, y, color, Math.random() * 5 + 2)); }
}

function animateFireworks() {
    animationFrameId = requestAnimationFrame(animateFireworks);
    ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
    particles.forEach((p, i) => {
        p.update(); p.draw();
        if (p.alpha <= p.decay) particles.splice(i, 1);
    });
    if (Math.random() < 0.05 && particles.length < 300) {
        createFireworks(Math.random() * fireworksCanvas.width, Math.random() * fireworksCanvas.height * 0.7);
    }
}

function stopFireworks() {
    cancelAnimationFrame(animationFrameId);
    animationFrameId = null;
    particles = [];
    ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
}

function showEnd(text) {
    const msgElement = document.getElementById('msg');
    msgElement.textContent = text;
    document.getElementById('overlay').style.display = 'flex';
    if (text === "Victory!") {
        playSound(sounds.victory);
        fireworksCanvas.style.display = 'block';
        animateFireworks();
        setTimeout(() => stopFireworks(), 5000);
    } else {
        playSound(sounds.gameOver);
        stopFireworks();
        fireworksCanvas.style.display = 'none';
    }
}

window.onload = initGame;
</script>
</body>
</html>


